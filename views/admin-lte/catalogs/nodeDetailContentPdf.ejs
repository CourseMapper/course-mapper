<div class="row" ng-controller="PDFNavigationController">

    <div class="col-xs-11" ng-controller="CommentListController">
        <div class="slide-container col-sm-8 col-md-8">
            <div id="viewerWrapper">

                <pdf-viewer source="{{pdfFile.link}}"></pdf-viewer>

                <div id="annotationZone">
                    <!--<div movable style="background-color:yellow;height:100px;width:100px;" ></div>-->
                </div>
                <div id="slideNavigationWrapper">
                    <div id="slideNavigationProgress">
                        <div id="slideNavigationCurrentProgress"></div>
                    </div>
                    <div id="slideNavigation" class="row notSelectable" ng-cloak>
                        <div class="col-md-4 text-center"></div>
                        <div class="col-md-4 text-center">
                            <div class="row">
                                                            <span class="glyphicon glyphicon-triangle-left iconSlideNav"
                                                                  aria-hidden="true"
                                                                  ng-click="changePageNumber(-1)"></span>
                                    <span id="slideNavText"
                                          class="fsSlideNav">{{currentPageNumber}}/{{maxPageNumber}}</span>
                                                            <span class="glyphicon glyphicon-triangle-right iconSlideNav"
                                                                  aria-hidden="true"
                                                                  ng-click="changePageNumber(1)"></span>
                            </div>
                        </div>
                        <div class="col-md-4 text-right"><span id="btn-fullscreen"
                                                               class="glyphicon glyphicon-fullscreen iconSlideNav"
                                                               aria-hidden="true"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="posts-list col-sm-4 col-md-4">

            <div class="annotation-wrapper">
                <div id="showComments">
                </div>
                <form action='/slide-viewer/submitComment' method="POST"
                      onsubmit="return commentOnSubmit()">
                    <fieldset>
                        <div class="control-group">
                            <label for="rawText">Commenting as
                                {{currentUser.username}}</label>

                            <div class="controls">
                                                                <textarea class="form-control" id="rawText"
                                                                          name="rawText"
                                                                          placeholder="rawText"></textarea>
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input type="hidden" class="form-control" id="author"
                                       name="author" value="{{currentUser.username}}">
                                <input type="hidden" class="form-control"
                                       id="pageNumber" name="pageNumber"
                                       value="{{currentPageNumber}}">
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <input class="form-control" id="tagNames"
                                       name="tagNames" placeholder="tagNames"
                                       type="hidden">
                                <input class="form-control" id="tagRelPos"
                                       name="tagRelPos" placeholder="tagRelPos"
                                       type="hidden">
                                <input class="form-control" id="tagRelCoord"
                                       name="tagRelCoord" placeholder="tagRelCoord"
                                       type="hidden">
                                <input class="form-control" id="tagColor"
                                       name="tagColor" placeholder="tagColor"
                                       type="hidden">

                            </div>
                        </div>
                        <!--Used as Template for annotation zone items -->
                        <div id="annotationZoneSubmitTemplate"
                             style="visibility: hidden;">
                            <button class="btn btn-default"
                                    onclick="removeAnnotationZone(this);">Remove
                            </button>
                        </div>
                        <!-- Will be filled when annotation zones are created -->
                        <div id="annotationZoneSubmitList">
                        </div>


                        <div class="control-group">
                            <div class="controls">


                                <!--<button type="submit" class="btn btn-default">Submit
                                </button>-->
                                <button class="btn btn-primary"> Add Comment
                                    <spinner show="isLoading"></spinner>
                                </button>
                            </div>
                        </div>
                    </fieldset>

                </form>
                <div id="annotationZoneSubmitListMovables">
                    <button class="btn btn-default" onclick="createMovableAnnZone();">
                        Add Annotation Zone
                    </button>
                </div>

                <!--<button class="btn btn-default" onclick="addAnnotationZoneData('test',1,2,3,4,'Red');">CREATE TEST ANNOTATION ZONE</button>-->


                <!--<div>

                  <form action='/slide-viewer/submitTag' method="POST">
                    <fieldset>
                      <div class="control-group">
                         <div class="controls">
                           <input class="form-control" id="annotationZoneName" name="annotationZoneName" placeholder="annotationZoneName"></textarea>
                         </div>
                       </div>
                     </fieldset>
                     <div class="control-group">
                       <div class="controls">
                         <button type="submit" class="btn btn-default">Submit</button>
                       </div>
                     </div>
                  </form>

                </div>-->
                <div>
                    <div id="annZoneList" style="display:none;"
                         ng-controller="AnnotationZoneListController">
                        Annotation Zone List:
                        <div id="annotationZoneList" ng-repeat="annZone in annZones"
                             ng-cloak>
                            <div class="{{annZone.name}}">
                                {{annZone.name}}
                                {{annZone.color}}
                            </div>
                        </div>
                    </div>
                    <div class="commentZoneList">
                        <h4>Comments</h4>

                        <div class="row">

                            <div class="controls ">
                                <!--<button class="btn btn-default" onclick="displayComments();">Show comments</button>
                                <div >
                                  <button class="btn btn-default" ng-click="loadComments('renderedText','true','{}')">Show comments Angular</button>
                                  <button class="btn btn-default" ng-click="loadComments('renderedText','false','{}')">Show comments Angular2</button>
                                </div>-->
                                <div class="col-xs-2">Sort by:</div>
                                <div class="col-xs-5 nopadding">
                                    <select id="orderTypeSelect"
                                            ng-model="orderType"
                                            ng-init="orderType = orderType || orderingOptions[0]"
                                            ng-options="item as item.name for item in orderingOptions"
                                            class="form-control">
                                    </select>
                                </div>

                                <div>
                                    <input style="display:none;" id="filterValueText"
                                           ng-model="filtersRaw"/>
                                    <!--<input type="hidden" id="pageFilter" ng-model="pageFilter" value = "{{currentPageNumber}}"></input>-->
                                </div>
                            </div>

                        </div>
                        <div id="commentList" class="row">
                            <div class="replies" ng-repeat="comment in comments" ng-cloak>
                                <div class="col-xs-1">
                                    <voting vote-type="slideComment" vote-type-id="{{comment._id}}"></voting>
                                </div>
                                <div class="col-xs-11">
                                    <comment posted-by="{{comment.author}}"
                                             post-id="{{comment._id}}"
                                             posted-date="{{comment.date}}"
                                             post-content="comment.html"
                                             is-post-owner="comment.author==$root.user.username"
                                             show-control="false"
                                            ></comment>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

<script>
    $("#btn-fullscreen").click(function () {
        $("#viewerWrapper").toggleFullScreen();
    });
</script>
