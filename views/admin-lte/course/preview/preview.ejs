<div ng-controller="CourseController">

    <div class="col-xs-12 col-md-8">
        <div class="row">
            <div class="box box-solid excerpt">
                <div class="box-header with-border">
                    <h3 class="box-title"> {{course.name}} </h3>
                </div><!-- /.box-header -->

            </div>
        </div>
        <div class="row">
            <div ng-show="course.video" style="height:40px">
                <a class="cursor videoButton" ng-click="playVideo()" aria-label="play intro video"
                   title="Play Intro Video">
                </a>
            </div>
            <div class="col-xs-6 preview-image-container"><br>
                <img class="preview-image" ng-hide="course.picture" src="/img/courses/placeholder.png">
                <img class="preview-image" ng-show="course.picture" ng-src="{{course.picture}}">
            </div>
            <div class="col-xs-6 small-description">
                <br>
                Started
                <strong>
                    {{course.dateAdded | relativeDate}}
                </strong>

                By
                <strong>
                    {{course.createdBy.displayName}}
                </strong>

                <p ng-show="course.courseTags.length > 0" class="filter">
                    <a class="label label-primary" style="cursor: default"
                       ng-repeat="tag in course.courseTags">
                        {{tag.name}}</a>
                </p>

                <br>
                <p ng-show="course.smallDescription">
                    {{course.smallDescription}}
                </p>
                <p ng-show="!isEnrolled && !isOwner && !isAuthorized()">
                    <button class="btn btn-primary btn-block" ng-click="enroll()">Enroll</button>

                </p>
            </div>
        </div>
        <div class="row" style="height: 15px;"></div>
        <div class="row">
            <div class="col-xs-12">
                <div class="box box-solid excerpt no-shadow">
                    <div class="box-header with-border">
                        <h3 class="box-title"> Description: </h3>
                    </div><!-- /.box-header -->
                    <div class="box-body description no-border">
                        <p ng-bind-html="course.description | unsafe">
                        </p>
                    </div><!-- /.box-body -->
                </div>

            </div>
        </div>

    </div>

    <!-- analytics-->
    <div id="course-preview-widgets" class="grid-stack col-xs-12 col-md-3"
         ng-controller="widgetCoursePreviewController">

        <div ng-show="!widgets || widgets.length == 0" class="empty-widget">
            There is no registered widget here.
        <span ng-show="isOwner" class="empty-widget">
          Go to the widget store to add one.
        </span>
        </div>

        <div class="grid-stack-item"
             data-gs-locked="yes"
             data-gs-no-resize="yes"
             ng-repeat="wdg in widgets" id="w{{wdg._id}}">

            <widget-box onload-action="initWidgetButton(wdg._id)"
                        entry-point="{{wdg.widgetId.entryPoint}}"
                        title="{{wdg.widget}}"
                        show-tools="checkOwnership(wdg.userId);"
                        show-config-button="wdg.widgetId.hasConfigButton"
                        close-action="closeWidget(wdg._id);"
                        dynamic-controller="wdg.widgetId.controller"
                        edit-action="editAction()"
            >
            </widget-box>
        </div>
    </div>

    <!-- analytics-->
    <div class="videoPlayerWrapper" ng-show="course.video && isPlaying" ng-click="stopVideo()">
        <div class="videoPlayerContainer" ng-click="$event.stopPropagation()"
             ng-controller="VideoContentPreviewController">
            <videogular vg-cue-points="cuePoints" vg-player-ready="onPlayerReady($API)">
                <vg-media vg-src="videoSources"></vg-media>
                <vg-controls>
                    <vg-play-pause-button></vg-play-pause-button>
                    <vg-time-display>{{ currentTime | date:'HH:mm:ss':'UTC' }}</vg-time-display>
                    <vg-scrub-bar>
                        <vg-scrub-bar-current-time></vg-scrub-bar-current-time>
                    </vg-scrub-bar>
                    <vg-time-display>{{ totalTime | date:'HH:mm:ss':'UTC'}}</vg-time-display>
                    <vg-volume>
                        <vg-mute-button></vg-mute-button>
                        <vg-volume-bar></vg-volume-bar>
                    </vg-volume>
                    <vg-fullscreen-button></vg-fullscreen-button>
                </vg-controls>
            </videogular>
        </div>
    </div>


</div>